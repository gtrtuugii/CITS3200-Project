{"version":3,"sources":["components/images/uwa-sq","components/firebase.js","components/header.js","components/login.js","components/reset.js","components/messaging_init_in_sw.js","components/Dashboard.js","components/register.js","components/updateProfile.js","components/check_inMatin.js","components/admin.js","App.js","index.js"],"names":["app","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","getAnalytics","getAuth","db","getFirestore","googleProvider","GoogleAuthProvider","signInWithGoogle","signInWithPopup","res","user","q","query","collection","where","uid","getDocs","docs","length","addDoc","name","displayName","authProvider","email","console","error","alert","message","logInWithEmailAndPassword","password","signInWithEmailAndPassword","code","sendPasswordReset","sendPasswordResetEmail","registerWithEmailAndPassword","student_id","phone_number","role","createUserWithEmailAndPassword","checked_in","check_time","stay","visited","logout","signOut","ResponsiveAppBar","useAuthState","loading","navigate","useNavigate","useState","loginRole","setLoginRole","fetchUserInfo","doc","data","getPages","settings","React","anchorElNav","setAnchorElNav","anchorElUser","setAnchorElUser","handleCloseNavMenu","handleCloseUserMenu","useEffect","AppBar","position","color","id","Container","maxWidth","Toolbar","disableGutters","Typography","variant","noWrap","component","href","sx","mr","display","xs","md","fontWeight","letterSpacing","paddingTop","marginTop","textDecoration","Box","height","alt","src","Logo","flexGrow","IconButton","size","onClick","event","currentTarget","Menu","anchorEl","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","open","Boolean","onClose","map","page","MenuItem","textAlign","to","Button","my","flex","width","Tooltip","title","p","Avatar","mt","setting","Login","setEmail","setPassword","sessionStorage","getItem","className","type","value","onChange","e","target","placeholder","Reset","firebaseConfig","log","Notification","requestPermission","then","permission","messaging","getMessaging","getToken","vapidKey","currentToken","Dashboard","visits","setVisits","ann","setAnn","setName","studentID","setstudentID","checkstat","setCheck","fetchVisits","fetchUserName","checkOut","newFields","time_exit","getTime","Date","userDoc","fdoc","updateDoc","n","toLocaleDateString","replace","toTimeString","substr","getAnnouncements","aRef","subtitle","link","imageSource","daysToLive","secondsBeforeBannerShows","closeIconSize","String","sort","a","b","time_entry","visit","locations_visited","time_stay","reason_for_visit","class","time","post","text","RegistrationForm","newFullName","SetNewFullName","NewStudentId","SetNewStudentID","NewEmail","SetNewEmail","NewPhoneNumber","SetNewPhoneNumber","NewPassword","SetNewPassword","NewConfirmPassword","SetNewConfirmPassword","NewRole","SetNewRole","newEmergencyFullName","SetNewEmergencyFullName","newEmergencyPhoneNumber","SetNewEmergencyPhoneNumber","newEmergencyRelationship","SetNewEmergencyRelationship","setUsers","userRef","contactRef","createEmergencyContact","emergency_contact_name","emergency_contact_number","relationship","visitor_name","getUsers","handleInputChange","htmlFor","selected","defaultValue","register","UpdateInfo","classNameName","readonly","disabled","required","for","CheckIn","checked","setChecked","setStudentID","NewLocations","setNewLocations","setPhoneNumber","visitor_role","setRole","NewStay","SetNewStay","NewReason","SetNewReason","checkIn","visitor_sid","visitor_phone_number","visitor_email","style","justifyContent","isObject","onRemove","onSelect","filter","obj","includes","options","Check","users","setNewRole","setText","setTitle","setLog","logRef","currName","setCurrName","currRole","setCurrRole","deleteUser","deleteDoc","handleChange","makeAdmin","fetchUserNameAndRole","newAnnouncement","getLog","contenteditable","App","exact","path","element","ReactDOM","createRoot","document","getElementById","render","rootElement"],"mappings":"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","file":"static/js/main.62e1ab3e.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/uwa-sq.75950ab7.bin\";","// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport { getAnalytics } from \"firebase/analytics\";\n\nimport {\n  getFirestore,\n  query,\n  getDocs,\n  collection,\n  where,\n  addDoc\n} from \"firebase/firestore\";\nimport {\n  getAuth,\n  GoogleAuthProvider,\n  signInWithPopup,\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  sendPasswordResetEmail,\n  signOut\n} from \"firebase/auth\";\n\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n// Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBalX_xDXBlVeSeiB5NOywaFyo-hEYBTNc\",\n  authDomain: \"event-management-system-94d52.firebaseapp.com\",\n  databaseURL:\n    \"https://event-management-system-94d52-default-rtdb.asia-southeast1.firebasedatabase.app\",\n  projectId: \"event-management-system-94d52\",\n  storageBucket: \"event-management-system-94d52.appspot.com\",\n  messagingSenderId: \"310234993862\",\n  appId: \"1:310234993862:web:d0627c9c4fda61f82773c7\",\n  measurementId: \"G-65BW91EEC0\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst analytics = getAnalytics(app);\n\nconst auth = getAuth(app);\n\nconst db = getFirestore(app);\n\n/*\nexport const signInWithGoogle = () => {\n  signInWithGoogle(auth, provider)\n    .then((result) => {\n      console.log(result);\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n};\n*/\nconst googleProvider = new GoogleAuthProvider();\nconst signInWithGoogle = async () => {\n  try {\n    const res = await signInWithPopup(auth, googleProvider);\n    const user = res.user;\n    const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user.uid));\n    const docs = await getDocs(q);\n    if (docs.docs.length === 0) {\n      await addDoc(collection(db, \"users\"), {\n        uid: user.uid,\n        name: user.displayName,\n        authProvider: \"google\",\n        email: user.email\n      });\n    }\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\nconst logInWithEmailAndPassword = async (email, password) => {\n  try {\n    await signInWithEmailAndPassword(auth, email, password);\n  } catch (error) {\n    alert(error.code);\n    if (error.code === \"auth/wrong-password\") {\n      alert.error(\"Please check the password\");\n    }\n    if (error.code === \"auth/user-not-found\") {\n      alert.error(\"Please check the email\");\n    }\n  }\n};\nconst sendPasswordReset = async (email) => {\n  try {\n    await sendPasswordResetEmail(auth, email);\n    alert(\"Password reset link sent!\");\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\nconst registerWithEmailAndPassword = async (\n  name,\n  email,\n  password,\n  student_id,\n  phone_number,\n  role\n) => {\n  try {\n    const res = await createUserWithEmailAndPassword(auth, email, password);\n    const user = res.user;\n    await addDoc(collection(db, \"users\"), {\n      uid: user.uid,\n      name,\n      authProvider: \"local\",\n      email,\n      student_id,\n      phone_number,\n      checked_in: false,\n      check_time: null,\n      stay: 0,\n      visited: [],\n      role\n    });\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\nconst logout = () => {\n  signOut(auth);\n};\n\nexport {\n  auth,\n  db,\n  signInWithGoogle,\n  logInWithEmailAndPassword,\n  registerWithEmailAndPassword,\n  sendPasswordReset,\n  logout\n};\n","import * as React from \"react\";\nimport \"./header.css\";\nimport AppBar from \"@mui/material/AppBar\";\nimport Box from \"@mui/material/Box\";\nimport Toolbar from \"@mui/material/Toolbar\";\nimport IconButton from \"@mui/material/IconButton\";\nimport Typography from \"@mui/material/Typography\";\nimport Menu from \"@mui/material/Menu\";\nimport MenuIcon from \"@mui/icons-material/Menu\";\nimport Container from \"@mui/material/Container\";\nimport Avatar from \"@mui/material/Avatar\";\nimport Button from \"@mui/material/Button\";\nimport Tooltip from \"@mui/material/Tooltip\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport AdbIcon from \"@mui/icons-material/Adb\";\n\nimport Logo from \"./images/uwa-sq\";\nimport \"./header.css\";\n\nimport { Link, useNavigate } from \"react-router-dom\";\n\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { auth, db, logout } from \"./firebase.js\";\nimport { useEffect, useState } from \"react\";\nimport { query, collection, getDocs, where } from \"firebase/firestore\";\n//const pages = ['Check In/Check Out', 'Contact', 'Blog'];\n\nfunction ResponsiveAppBar() {\n  const [user, loading, error] = useAuthState(auth);\n  const navigate = useNavigate();\n  const [loginRole, setLoginRole] = useState(\"\");\n\n  const fetchUserInfo = async () => {\n    try {\n      const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user?.uid));\n\n      const doc = await getDocs(q);\n      const data = doc.docs[0].data();\n      setLoginRole(data.role);\n    } catch (error) {\n      console.error(error);\n      alert(\"An error occured while fetching user data\");\n    }\n  };\n\n  function getPages() {\n    if (loginRole === \"Admin\") {\n      const pages = user\n        ? [\"Profile\", \"Dashboard\", \"CheckIn\", \"Admin\", \"Contact\"]\n        : [\"Contact\", \"About UWA Farm\"];\n      return pages;\n    } else {\n      const pages = user\n        ? [\"Profile\", \"Dashboard\", \"CheckIn\", \"Contact\"]\n        : [\"Contact\", \"About UWA Farm\"];\n      return pages;\n    }\n  }\n\n  const settings = user ? [\"Logout\"] : [\"Register\", \"Login\"];\n\n  const [anchorElNav, setAnchorElNav] = React.useState(null);\n  const [anchorElUser, setAnchorElUser] = React.useState(null);\n\n  const handleOpenNavMenu = (event) => {\n    setAnchorElNav(event.currentTarget);\n  };\n  const handleOpenUserMenu = (event) => {\n    setAnchorElUser(event.currentTarget);\n  };\n\n  const handleCloseNavMenu = () => {\n    setAnchorElNav(null);\n  };\n\n  const handleCloseUserMenu = () => {\n    setAnchorElUser(null);\n  };\n\n  useEffect(() => {\n    if (loading) return;\n    if (!user) return navigate(\"/home\");\n    fetchUserInfo();\n  }, [user, loading]);\n\n  return (\n    <AppBar position=\"static\" color=\"primary\" id=\"nvbar\">\n      <Container maxWidth=\"xl\">\n        <Toolbar disableGutters>\n          <Typography\n            variant=\"h6\"\n            noWrap\n            component=\"a\"\n            href=\"/\"\n            sx={{\n              mr: 2,\n              display: { xs: \"none\", md: \"flex\" },\n\n              fontWeight: 700,\n              letterSpacing: \".3rem\",\n              paddingTop: \"-4em\",\n              marginTop: \"1.4em\",\n              color: \"inherit\",\n              textDecoration: \"none\"\n            }}\n          >\n            <Box\n              component=\"img\"\n              sx={{\n                height: 60\n              }}\n              id=\"uwalogo\"\n              alt=\"UWA Logo\"\n              src={Logo}\n            />\n            UWA Farmfield\n          </Typography>\n\n          <Box sx={{ flexGrow: 1, display: { xs: \"flex\", md: \"none\" } }}>\n            <IconButton\n              size=\"large\"\n              aria-label=\"account of current user\"\n              aria-controls=\"menu-appbar\"\n              aria-haspopup=\"true\"\n              onClick={handleOpenNavMenu}\n              color=\"inherit\"\n            >\n              <MenuIcon />\n            </IconButton>\n            <Menu\n              id=\"menu-appbar\"\n              anchorEl={anchorElNav}\n              anchorOrigin={{\n                vertical: \"bottom\",\n                horizontal: \"left\"\n              }}\n              keepMounted\n              transformOrigin={{\n                vertical: \"top\",\n                horizontal: \"left\"\n              }}\n              open={Boolean(anchorElNav)}\n              onClose={handleCloseNavMenu}\n              sx={{\n                display: { xs: \"block\", md: \"none\" }\n              }}\n            >\n              {getPages().map((page) => (\n                <MenuItem key={page} onClick={handleCloseNavMenu}>\n                  <Typography textAlign=\"center\">\n                    <Link to={`/${page}`}>{page}</Link>\n                  </Typography>\n                </MenuItem>\n              ))}\n            </Menu>\n          </Box>\n\n          <Typography\n            variant=\"h5\"\n            noWrap\n            component=\"a\"\n            href=\"\"\n            sx={{\n              mr: 2,\n              display: { xs: \"flex\", md: \"none\" },\n              flexGrow: 1,\n              fontWeight: 700,\n              letterSpacing: \".3rem\",\n              color: \"inherit\",\n              textDecoration: \"none\"\n            }}\n          >\n            UWA Farmfield\n          </Typography>\n          <Box sx={{ flexGrow: 2, display: { xs: \"none\", md: \"flex\" } }}>\n            {getPages().map((page) => (\n              <Button\n                key={page}\n                onClick={handleCloseNavMenu}\n                sx={{ my: 1, color: \"white\", display: \"block\" }}\n              >\n                <Link to={`/${page}`}>{page}</Link>\n              </Button>\n            ))}\n          </Box>\n\n          <Box sx={{ flex: 1, flexGrow: 0, width: 60 }}>\n            <Tooltip title=\"Open settings\">\n              <IconButton onClick={handleOpenUserMenu} sx={{ p: 0 }}>\n                <Avatar src=\"/src/components/images/account.png\" alt=\"P\" />\n              </IconButton>\n            </Tooltip>\n            <Menu\n              sx={{ flex: 1, mt: \"45px\" }}\n              id=\"menu-appbar\"\n              anchorEl={anchorElUser}\n              anchorOrigin={{\n                vertical: \"top\",\n                horizontal: \"right\"\n              }}\n              keepMounted\n              transformOrigin={{\n                vertical: \"top\",\n                horizontal: \"right\"\n              }}\n              open={Boolean(anchorElUser)}\n              onClose={handleCloseUserMenu}\n            >\n              {settings.map((setting) => (\n                <MenuItem key={setting} onClick={(handleCloseUserMenu, logout)}>\n                  <Typography textAlign=\"center\">{setting}</Typography>\n                </MenuItem>\n              ))}\n            </Menu>\n          </Box>\n        </Toolbar>\n      </Container>\n    </AppBar>\n  );\n}\nexport default ResponsiveAppBar;\n","import \"./style.css\";\nimport \"./login.css\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\n\nimport {\n  auth,\n  logInWithEmailAndPassword,\n  signInWithGoogle\n} from \"./firebase.js\";\nimport { getAuth } from \"firebase/auth\";\n\nexport default function Login() {\n  // Login\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [user, loading, error] = useAuthState(auth);\n  const navigate = useNavigate();\n  const authentication = getAuth();\n\n  useEffect(() => {\n    let authToken = sessionStorage.getItem(\"Auth Token\");\n    if (loading) {\n      // TODO\n      return;\n    }\n    if (user) {\n      navigate(\"/dashboard\");\n    }\n  }, [user, loading]);\n\n  return (\n    <div className=\"login\">\n      <div className=\"login__container\">\n        <input\n          type=\"text\"\n          className=\"login__textBox\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          placeholder=\"E-mail Address\"\n        />\n        <input\n          type=\"password\"\n          className=\"login__textBox\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          placeholder=\"Password\"\n        />\n        <button\n          className=\"login__btn\"\n          onClick={() => {\n            logInWithEmailAndPassword(email, password);\n          }}\n        >\n          Login\n        </button>\n        <div className=\"text_with_line\">Or</div>\n        <button className=\"login__btn login__google\" onClick={signInWithGoogle}>\n          Login with Google\n        </button>\n        <div>\n          <Link to=\"/reset\">Forgot Password</Link>\n        </div>\n        <div>\n          Don't have an account? <Link to=\"/register\">Register</Link> now.\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport { auth, sendPasswordReset } from \"./firebase.js\";\nimport \"./reset.css\";\n\nfunction Reset() {\n  const [email, setEmail] = useState(\"\");\n  const [user, loading, error] = useAuthState(auth);\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (loading) return;\n    if (user) navigate(\"/dashboard\");\n  }, [user, loading]);\n  return (\n    <div className=\"reset\">\n      <div className=\"reset__container\">\n        <input\n          type=\"text\"\n          className=\"reset__textBox\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          placeholder=\"E-mail Address\"\n        />\n        <button className=\"reset__btn\" onClick={() => sendPasswordReset(email)}>\n          Send password reset email\n        </button>\n        <div>\n          Don't have an account? <Link to=\"/register\">Register</Link> now.\n        </div>\n      </div>\n    </div>\n  );\n}\nexport default Reset;\n","import { initializeApp } from \"firebase/app\";\r\nimport { getMessaging, getToken } from \"firebase/messaging\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyBalX_xDXBlVeSeiB5NOywaFyo-hEYBTNc\",\r\n  authDomain: \"event-management-system-94d52.firebaseapp.com\",\r\n  databaseURL:\r\n    \"https://event-management-system-94d52-default-rtdb.asia-southeast1.firebasedatabase.app\",\r\n  projectId: \"event-management-system-94d52\",\r\n  storageBucket: \"event-management-system-94d52.appspot.com\",\r\n  messagingSenderId: \"310234993862\",\r\n  appId: \"1:310234993862:web:d0627c9c4fda61f82773c7\",\r\n  measurementId: \"G-65BW91EEC0\"\r\n};\r\n\r\nfunction requestPermission() {\r\n  console.log(\"Requesting permission...\");\r\n  Notification.requestPermission().then((permission) => {\r\n    if (permission === \"granted\") {\r\n      console.log(\"Notification permission granted.\");\r\n      const app = initializeApp(firebaseConfig);\r\n\r\n      const messaging = getMessaging(app);\r\n      getToken(messaging, {\r\n        vapidKey:\r\n          \"BJVJNQauTv9kLGqbAv7IL-T0unAW_a-Am0ZPj5Qlv3pSkT9YLAcU6jgcuKYYyKi6DyQpdI8TzsjOjLKccLztvio\"\r\n      }).then((currentToken) => {\r\n        if (currentToken) {\r\n          console.log(\"currentToken: \", currentToken);\r\n        } else {\r\n          console.log(\"Can not get token\");\r\n        }\r\n      });\r\n    } else {\r\n      console.log(\"Do not have permission!\");\r\n    }\r\n  });\r\n}\r\n\r\nrequestPermission();\r\n","import React, { useEffect, useState } from \"react\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { useNavigate } from \"react-router-dom\";\nimport Announcement from \"react-announcement\";\nimport Logo from \"./images/uwa-sq\";\nimport \"./dashboard.css\";\nimport { auth, db, logout } from \"./firebase.js\";\nimport {\n  query,\n  collection,\n  getDocs,\n  doc as fdoc,\n  where,\n  updateDoc\n} from \"firebase/firestore\";\nimport \"./messaging_init_in_sw\";\nimport { getAuth } from \"firebase/auth\";\n\nfunction Dashboard() {\n  const [visits, setVisits] = useState([]);\n  const [ann, setAnn] = useState([]);\n  const [checked, setChecked] = useState(false);\n\n  //const visitRef = collection(db, \"visits\");\n\n  // TODO: Combine check in & check out into 1 func\n  // Not working\n  // Check In\n\n  /*\n  // Check Out\n  const checkOut = async(id) => {\n    const userDoc = docc(db, \"users\", id)\n    const newFields = {checked_in: false}\n    await updateDoc(userDoc, newFields)\n    const newTimeFields = { check_time: getTime(new Date().getTime()) }\n    await updateDoc(userDoc, newTimeFields)\n  }\n*/\n  // declaring the default state\n\n  const [user, loading, error] = useAuthState(auth);\n  const [name, setName] = useState(\"\");\n  const [studentID, setstudentID] = useState(\"\");\n  const [checkstat, setCheck] = useState(\"\");\n  const navigate = useNavigate();\n\n  const fetchVisits = async () => {\n    try {\n      const q = query(collection(db, \"visits\"), where(\"uid\", \"==\", user?.uid));\n      const data = await getDocs(q);\n\n      //obj.sort((a,b) => a.timeM - b.timeM);\n      setVisits(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\n      //visits.sort((a,b) => b.time_stay - a.time_stay);\n      //visits.sort((a, b) => (a.time_entry > b.time_entry) ? 1 : -1);\n      //console.log(visits);\n\n      //doc.forEach((doc) => {\n      // doc.data() is never undefined for query doc snapshots\n      //setVisits(doc.id, \" => \", doc.data());\n    } catch (error) {\n      //const data = doc.docs[0].data();\n      //console.log(data);\n\n      alert(error);\n    }\n  };\n\n  const fetchUserName = async () => {\n    try {\n      const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user?.uid));\n\n      const doc = await getDocs(q);\n      const data = doc.docs[0].data();\n      setstudentID(data.student_id);\n      setName(data.name);\n      setCheck(data.checked_in);\n    } catch (err) {\n      console.error(err);\n      alert(\"An error occured while fetching user data\");\n    }\n  };\n  const checkOut = async (id) => {\n    try {\n      //const userDoc = fdoc(db, \"users\", id);\n      //const docRef = db.collection('visits').doc(id);\n      //const q = query(collection(db, \"users\"), where(\"uid\", \"==\", id));\n      //const doc = await getDocs(q);\n      //const data = doc.docs[0].data();\n      const newFields = { time_exit: getTime(new Date().getTime()) };\n      //await updateDoc(userDoc, newFields);\n      //await setDoc(userDoc, {time_exit: getTime(new Date().getTime()) });\n      //await userDoc.updateDoc(newFields);\n      //await docRef.update(newFields);\n\n      const userDoc = fdoc(db, \"visits\", id);\n      //const newFields = { checked_in: true };\n      await updateDoc(userDoc, newFields);\n    } catch (error) {\n      alert(error.message);\n    }\n  };\n\n  function getTime(n) {\n    n = new Date(n);\n    return (\n      n.toLocaleDateString().replace(/\\//g, \"-\") +\n      \" \" +\n      n.toTimeString().substr(0, 8)\n    );\n  }\n\n  const getAnnouncements = async () => {\n    const aRef = collection(db, \"announcements\");\n    const data = await getDocs(aRef);\n    setAnn(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\n  };\n\n  useEffect(() => {\n    if (loading) return;\n    if (!user) return navigate(\"/\");\n    fetchUserName();\n    fetchVisits();\n    getAnnouncements();\n  }, [user, loading]);\n\n  return (\n    <div className=\"container\" id=\"dashboard1\">\n      <Announcement\n        title=\"Please follow the guidelines by UWA\"\n        subtitle=\"All users and visitors must read and understand the information below before visiting UWA Farm Ridgefield.\"\n        link=\"https://www.uwa.edu.au/institutes/institute-of-agriculture/UWA-Farm-Ridgefield\"\n        imageSource={Logo}\n        daysToLive={3}\n        secondsBeforeBannerShows={5}\n        closeIconSize={20}\n      />\n      <div className=\"row justify-content-md-center\">\n        <div className=\"col mb-3\">\n          <div className=\"card\">\n            <div className=\"card-header\">\n              <h2> Welcome Back {name}</h2>\n            </div>\n            <div className=\"card-body\">\n              <div className=\"dashboard\">\n                <div className=\"dashboard__container\">\n                  <div>{user?.email}</div>\n                  <div>user id: {String(user?.uid)}</div>\n                  <div>student id {studentID}</div>\n                  <div>check {String(checkstat)}</div>\n                  <div>checkTime {String(user?.check_time)}</div>\n                  <div>current Time {getTime(new Date().getTime())}</div>\n                  <br></br>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"col mb-3\">\n          <div className=\"card\">\n            <div className=\"card-header\">\n              <h2> Previous visits </h2>\n            </div>\n            <div className=\"card-body overflow-auto\">\n              <table className=\"table\" id=\"visits_table\">\n                <tbody>\n                  <tr>\n                    <th> Locations </th>\n                    <th> Check-In Time </th>\n                    <th> Duration of Stay </th>\n                    <th> Reason for visit </th>\n                    <th> Check Out Time </th>\n                  </tr>\n                  {visits\n                    .sort((a, b) => (a.time_entry < b.time_entry ? 1 : -1))\n                    .map((visit) => {\n                      return (\n                        <tr key={visit}>\n                          <td>{visit.locations_visited}</td>\n                          <td>{visit.time_entry}</td>\n                          <td>{visit.time_stay}</td>\n                          <td>{visit.reason_for_visit}</td>\n                          <td>\n                            {visit.time_exit}\n                            <button\n                              type=\"button\"\n                              id=\"check_button\"\n                              class=\"btn btn-primary\"\n                              onClick={() => checkOut(visit.id)}\n                            >\n                              Check Out\n                            </button>\n                          </td>\n                        </tr>\n                      );\n                    })}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"row\">\n        <div className=\"col mb-3\">\n          <div className=\"card\">\n            <div className=\"card-header\">Announcements</div>\n            <div className=\"card-body\">\n              <table id=\"a_table\">\n                <tbody>\n                  {ann\n                    .sort((a, b) => (a.time < b.time ? 1 : -1))\n                    .map((post) => {\n                      return (\n                        <tr key={post}>\n                          <td id=\"author\">\n                            <strong>{post.name}</strong> ({post.role}):{\" \"}\n                          </td>\n                          <td id=\"title\">\n                            <strong>{post.title}</strong>\n                          </td>\n                          <td>{post.text}</td>\n                          <td>{post.time}</td>\n                        </tr>\n                      );\n                    })}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n        <div className=\"col mb-3\">\n          <div className=\"card\">\n            <div className=\"card-header\">Contact Staff</div>\n            <div className=\"card-body overflow-auto\">\n              <table className=\"table\" id=\"contact_table\">\n                <tr>\n                  <th>Name</th>\n                  <th>Phone number</th>\n                  <th>E-mail</th>\n                </tr>\n                <tr>\n                  <td>Debra Mullan</td>\n                  <td>+61 8 6488 3756</td>\n                  <td>debra.mullan@uwa.edu.au</td>\n                </tr>\n                <tr>\n                  <td>Tim Watts </td>\n                  <td> +61 0427 871 321</td>\n                  <td> tim.watts@uwa.edu.au </td>\n                </tr>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\nexport default Dashboard;\n","import \"./register.css\";\n// Cannot find the path to src so I copied it here, change it on github\nimport { db } from \"./firebase.js\";\nimport { useState, useEffect } from \"react\";\nimport {\n  collection,\n  getDocs,\n  addDoc,\n  doc,\n  setDoc,\n  updateDoc\n} from \"firebase/firestore\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport {\n  auth,\n  registerWithEmailAndPassword,\n  signInWithGoogle\n} from \"./firebase\";\n\nfunction RegistrationForm() {\n  // For Visitor\n  const [newFullName, SetNewFullName] = useState(\"\");\n  const [NewStudentId, SetNewStudentID] = useState(\"\");\n  const [NewEmail, SetNewEmail] = useState(\"\");\n  const [NewPhoneNumber, SetNewPhoneNumber] = useState(\"\");\n  const [NewPassword, SetNewPassword] = useState(\"\");\n  const [NewConfirmPassword, SetNewConfirmPassword] = useState(\"\");\n  const [NewRole, SetNewRole] = useState(\"\");\n  // For Emergency Contact\n  const [newEmergencyFullName, SetNewEmergencyFullName] = useState(\"\");\n  const [newEmergencyPhoneNumber, SetNewEmergencyPhoneNumber] = useState(\"\");\n  const [newEmergencyRelationship, SetNewEmergencyRelationship] = useState(\"\");\n  const [newEmergencyRelation, SetNewEmergencyRelation] = useState(\"\");\n\n  const [users, setUsers] = useState([]);\n  const userRef = collection(db, \"users\");\n  const userInfoRef = collection(db, \"usersinfo\");\n  const contactRef = collection(db, \"emergency_contact\");\n\n  const [user, loading, error] = useAuthState(auth);\n  const navigate = useNavigate();\n  /*\n  // Create a new user in database\n  const createUser = async () => {\n    const userDoc = doc(db, \"usersinfo\")\n    await addDoc(userDoc, \n      {\n      name: newFullName,\n      student_id: NewStudentId,\n      email: NewEmail,\n      phone_number: NewPhoneNumber,\n      checked_in: false,\n      password: NewPassword,\n      confirm_password: NewConfirmPassword,\n      check_time: null,\n      stay: 0,\n      visited: []\n    });\n  };\n*/\n  // Register a new User\n  const register = () => {\n    try {\n      if (!newFullName) alert(\"Please enter name\");\n      if (!NewEmail) alert(\"Please enter e-mail address\");\n      if (!NewPassword) alert(\"Please enter password\");\n      registerWithEmailAndPassword(\n        newFullName,\n        NewEmail,\n        NewPassword,\n        NewStudentId,\n        NewPhoneNumber,\n        NewRole\n      );\n    } catch (error) {\n      alert(error.message);\n    }\n  };\n\n  // Creates an emergency contact for the user created\n  const createEmergencyContact = async () => {\n    await addDoc(contactRef, {\n      emergency_contact_name: newEmergencyFullName,\n      emergency_contact_number: newEmergencyPhoneNumber,\n      relationship: newEmergencyRelationship,\n      visitor_name: newFullName\n    });\n  };\n\n  // Fetch from DB and map (Read)\n  useEffect(() => {\n    const getUsers = async () => {\n      const data = await getDocs(userRef);\n      setUsers(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\n    };\n    getUsers();\n  }, []);\n\n  useEffect(() => {\n    if (loading) return;\n    if (user) navigate.replace(\"/dashboard\");\n  }, [user, loading]);\n\n  const handleInputChange = (e) => {\n    const { id, value } = e.target;\n    if (id === \"fullName\") {\n      SetNewFullName(value);\n    }\n    if (id === \"studentID\") {\n      SetNewStudentID(value);\n    }\n    if (id === \"email\") {\n      SetNewEmail(value);\n    }\n    if (id === \"phoneNumber\") {\n      SetNewPhoneNumber(value);\n    }\n    if (id === \"password\") {\n      SetNewPassword(value);\n    }\n    if (id === \"confirmPassword\") {\n      SetNewConfirmPassword(value);\n    }\n    // add emergency contact\n    // TO DO: Add relationship\n    if (id === \"emergencyFullName\") {\n      SetNewEmergencyFullName(value);\n    }\n    if (id === \"emergencyPhoneNumber\") {\n      SetNewEmergencyPhoneNumber(value);\n    }\n  };\n\n  return (\n    <div className=\"form\">\n      <div className=\"form-body\">\n        <b>Visitor Details</b>\n        <div className=\"fullName\">\n          <label className=\"form__label\" htmlFor=\"fullName\">\n            Full Name{\" \"}\n          </label>\n          <input\n            className=\"form__input\"\n            type=\"text\"\n            value={newFullName}\n            onChange={(e) => handleInputChange(e)}\n            id=\"fullName\"\n            placeholder=\"Full Name\"\n          />\n        </div>\n        <div className=\"studentID\">\n          <label className=\"form__label\" htmlFor=\"studentID\">\n            Special ID{\" \"}\n          </label>\n          <input\n            type=\"text\"\n            name=\"\"\n            id=\"studentID\"\n            value={NewStudentId}\n            className=\"form__input\"\n            onChange={(e) => handleInputChange(e)}\n            placeholder=\"Student or Staff ID\"\n          />\n        </div>\n        <div className=\"email\">\n          <label className=\"form__label\" htmlFor=\"email\">\n            Email{\" \"}\n          </label>\n          <input\n            type=\"email\"\n            id=\"email\"\n            className=\"form__input\"\n            value={NewEmail}\n            onChange={(e) => handleInputChange(e)}\n            placeholder=\"Email\"\n          />\n        </div>\n        <div className=\"phoneNumber\">\n          <label className=\"form__label\" htmlFor=\"phoneNumber\">\n            Phone Number{\" \"}\n          </label>\n          <input\n            type=\"phoneNumber\"\n            id=\"phoneNumber\"\n            className=\"form__input\"\n            value={NewPhoneNumber}\n            onChange={(e) => handleInputChange(e)}\n            placeholder=\"Phone Number\"\n          />\n        </div>\n        <select\n          id=\"dropselect\"\n          className=\"form-select form-select-sm\"\n          aria-label=\".form-select-sm example\"\n          onChange={(e) => SetNewRole(e.target.value)}\n        >\n          <option selected>Select Role</option>\n          <option defaultValue=\"1\">Student</option>\n          <option defaultValue=\"2\">Researcher</option>\n          <option defaultValue=\"3\">Contractor</option>\n          <option defaultValue=\"4\">Other</option>\n        </select>\n        <div className=\"password\">\n          <label className=\"form__label\" htmlFor=\"password\">\n            Password{\" \"}\n          </label>\n          <input\n            className=\"form__input\"\n            type=\"password\"\n            id=\"password\"\n            value={NewPassword}\n            onChange={(e) => handleInputChange(e)}\n            placeholder=\"Password\"\n          />\n        </div>\n        <div className=\"confirmPassword\">\n          <label className=\"form__label\" htmlFor=\"confirmPassword\">\n            Confirm Password{\" \"}\n          </label>\n          <input\n            className=\"form__input\"\n            type=\"password\"\n            id=\"confirmPassword\"\n            value={NewConfirmPassword}\n            onChange={(e) => handleInputChange(e)}\n            placeholder=\"Confirm Password\"\n          />\n        </div>\n        <b>\n          Have you completed{\" \"}\n          <a href=\"https://www.uwa.edu.au/institutes/institute-of-agriculture/-/media/UWA-Institute-of-Agriculture/Documents/FF2050-Project/Visitor-and-User-Induction_2022_as-at-10-May-2022.docx\">\n            farm induction\n          </a>{\" \"}\n        </b>{\" \"}\n        ?\n        <div className=\"form-check\">\n          <label\n            className=\"form-check-label\"\n            htmlFor=\"flexCheckDefault\"\n          ></label>\n          <input\n            className=\"form-check-input\"\n            type=\"checkbox\"\n            value=\"\"\n            id=\"flexCheckDefault\"\n          />\n          Yes\n        </div>\n        <b> Emergency Contact </b>\n        <div className=\"emergencyFullName\">\n          <label className=\"form__label\" htmlFor=\"emergencyFullName\">\n            Full Name{\" \"}\n          </label>\n          <input\n            className=\"form__input\"\n            type=\"text\"\n            value={newEmergencyFullName}\n            onChange={(e) => handleInputChange(e)}\n            id=\"emergencyFullName\"\n            placeholder=\"Full Name\"\n          />\n        </div>\n        <div className=\"emergencyPhoneNumber\">\n          <label className=\"form__label\" htmlFor=\"emergencyPhoneNumber\">\n            Phone Number{\" \"}\n          </label>\n          <input\n            type=\"phoneNumber\"\n            id=\"emergencyPhoneNumber\"\n            className=\"form__input\"\n            value={newEmergencyPhoneNumber}\n            onChange={(e) => handleInputChange(e)}\n            placeholder=\"Phone Number\"\n          />\n        </div>\n        <select\n          id=\"dropselect\"\n          className=\"form-select form-select-sm\"\n          aria-label=\".form-select-sm example\"\n          onChange={(e) => SetNewEmergencyRelationship(e.target.value)}\n        >\n          <option selected>Relationship</option>\n          <option defaultValue=\"1\">Parent</option>\n          <option defaultValue=\"2\">Sibling</option>\n          <option defaultValue=\"3\">Other</option>\n        </select>\n        <div className=\"form-check\">\n          <label\n            className=\"form-check-label\"\n            htmlFor=\"flexCheckDefault\"\n          ></label>\n          <input\n            className=\"form-check-input\"\n            type=\"checkbox\"\n            defaultValue=\"\"\n            id=\"flexCheckDefault\"\n          />\n          I accept the <a href=\"url\">terms and conditions</a>\n        </div>\n        <div className=\"form-check\">\n          <label\n            className=\"form-check-label\"\n            htmlFor=\"flexCheckDefault\"\n          ></label>\n          <input\n            className=\"form-check-input\"\n            type=\"checkbox\"\n            value=\"\"\n            id=\"flexCheckDefault\"\n          />\n          I accept the <a href=\"url\">privacy terms</a>\n        </div>\n      </div>\n      <div className=\"footer\">\n        <Link to=\"/\">\n          <button\n            onClick={() => {\n              register();\n              createEmergencyContact();\n            }}\n            type=\"submit\"\n            className=\"btn btn-primary\"\n            href=\"/\"\n          >\n            Register\n          </button>\n        </Link>\n      </div>\n    </div>\n  );\n}\nexport default RegistrationForm;\n","import React, { useEffect, useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport \"./updateinfo.css\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { auth, db, logout } from \"./firebase.js\";\nimport {\n  query,\n  collection,\n  getDocs,\n  getDoc,\n  setDoc,\n  doc as fdoc,\n  where,\n  updateDoc,\n  QuerySnapshot,\n  documentId\n} from \"firebase/firestore\";\nfunction UpdateInfo() {\n  const [user, loading, error] = useAuthState(auth);\n  const [name, setName] = useState(\"\");\n  const [studentID, setstudentID] = useState(\"\");\n  const navigate = useNavigate();\n\n  const fetchUserName = async () => {\n    try {\n      const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user?.uid));\n\n      const doc = await getDocs(q);\n      const data = doc.docs[0].data();\n      setstudentID(data.student_id);\n      setName(data.name);\n    } catch (err) {\n      console.error(err);\n      alert(\"An error occured while fetching user data\");\n    }\n  };\n\n  useEffect(() => {\n    if (loading) return;\n    if (!user) return navigate(\"/\");\n    fetchUserName();\n  }, [user, loading]);\n\n  return (\n    <div className=\"container\">\n      <div className=\"row justify-content-md-center\">\n        <div className=\"col mb-3\">\n          <div className=\"card\">\n            <div className=\"card-header\">\n              <h2>Change user information</h2>\n            </div>\n            <div className=\"card-body\" id=\"fullnameCHANGETHIS\">\n              <div classNameName=\"rego-container\">\n                <label class=\"col-sm-2 col-form-label\">Name </label>\n                <br></br>\n                <input\n                  className=\"form-control\"\n                  type=\"text\"\n                  placeholder={name}\n                  readonly\n                  disabled\n                ></input>\n                <br></br>\n                <label>Special ID </label>\n                <br></br>\n                <input\n                  className=\"form-control\"\n                  type=\"text\"\n                  placeholder={studentID}\n                  readonly\n                  disabled\n                ></input>\n                <br></br>\n                <label>New Phone-number </label>\n                <br></br>\n                <input\n                  className=\"form-control\"\n                  type=\"text\"\n                  name=\"phoneNumber\"\n                  required\n                  placeholder=\"Enter phone number\"\n                />\n                <button type=\"button\" class=\"btn btn-outline-info\">\n                  Update\n                </button>\n                <br></br>\n                <br></br>\n                <label>New Email </label>\n                <br></br>\n                <input\n                  className=\"form-control\"\n                  type=\"text\"\n                  name=\"email\"\n                  required\n                  placeholder=\"Enter email\"\n                />\n                <button type=\"button\" class=\"btn btn-outline-info\">\n                  Update\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"col mb-3\">\n          <div className=\"card\">\n            <div className=\"card-header\">\n              <h2>Change Password</h2>\n            </div>\n            <div className=\"card-body\">\n              <div classNameName=\"rego-container\">\n                <label>Current password </label>\n                <br></br>\n                <input\n                  className=\"form-control\"\n                  type=\"text\"\n                  name=\"oldpassword\"\n                  required\n                  placeholder=\"Enter current password\"\n                />\n                <label>New password </label>\n                <br></br>\n                <input\n                  className=\"form-control\"\n                  type=\"text\"\n                  name=\"newpassword\"\n                  required\n                  placeholder=\"Enter new password\"\n                />\n                <label>Confirm new password </label>\n                <br></br>\n                <input\n                  className=\"form-control\"\n                  type=\"text\"\n                  name=\"confirmnewpassword\"\n                  required\n                  placeholder=\"Retype new password\"\n                />\n              </div>\n              <br></br>\n              <button type=\"button\" class=\"btn btn-outline-info\">\n                Update\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"row justify-content-md-center\">\n        <div className=\"col\">\n          <div className=\"card\">\n            <div className=\"card-header\">\n              <h2>Add Emergency Contact</h2>\n            </div>\n            <div className=\"card-body\">\n              <div className=\"rego-container\">\n                <label>Full Name </label>\n                <br></br>\n                <input type=\"text\" name=\"fullEmergencyName\" required />\n                {/* {renderErrorMessage(\"uname\")} */}\n              </div>\n              <div className=\"rego-container\">\n                <label>Phone-number </label>\n                <br></br>\n                <input type=\"text\" name=\"PhoneNumberEmergency\" required />\n                {/* {renderErrorMessage(\"uname\")} */}\n              </div>\n              <div className=\"rego-container\">\n                <label for=\"relationship\">Relationship</label>\n                <br></br>\n                <select>\n                  <option value=\"Parent\">Parent</option>\n                  <option value=\"Friend\">Friend</option>\n                  <option value=\"Child\">Child</option>\n                  <option value=\"Other\">Other</option>\n                </select>\n              </div>\n              <br></br>\n              <div className=\"rego-container\">\n                {/* <input type=\"submit\" name = \"login\"/> */}\n                <button type=\"button\" className=\"btn btn-success-outline\">\n                  <Link to=\"/\">Submit</Link>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default UpdateInfo;\n","import \"./check_in.css\";\nimport React, { useState, useEffect, setValue } from \"react\";\nimport { Multiselect } from \"multiselect-react-dropdown\";\nimport { auth, db, logout } from \"./firebase.js\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport {\n  query,\n  collection,\n  getDocs,\n  addDoc,\n  doc as fdoc,\n  where\n} from \"firebase/firestore\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport { Select } from \"react-select\";\nimport Announcement from \"react-announcement\";\nimport Logo from \"./images/uwa-sq\";\n\nfunction CheckIn() {\n  const [user, loading, error] = useAuthState(auth);\n  const [checked, setChecked] = useState(false);\n  const [name, setName] = useState(\"\");\n  const [studentID, setStudentID] = useState(\"\");\n  const [NewLocations, setNewLocations] = useState([]);\n  const [phone_number, setPhoneNumber] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [visitor_uid, setUID] = useState(\"\");\n  const [visitor_role, setRole] = useState(\"\");\n  const [visitor_sid, setSID] = useState(\"\");\n  const [time_entry, setTimeEntry] = useState(\"\");\n  const [NewStay, SetNewStay] = useState(\"\");\n  const [NewReason, SetNewReason] = useState(\"\");\n  const locations_select = [];\n  const navigate = useNavigate();\n\n  const displayReminder = () => {\n    setChecked(!checked);\n  };\n\n  const fetchUserInfo = async () => {\n    try {\n      const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user?.uid));\n\n      const doc = await getDocs(q);\n      const data = doc.docs[0].data();\n      setStudentID(data.student_id);\n      setName(data.name);\n      setChecked(data.checked_in);\n      setRole(data.role);\n      setPhoneNumber(data.phone_number);\n      setEmail(data.email);\n    } catch (error) {\n      console.error(error);\n      alert(\"An error occured while fetching user data\");\n    }\n  };\n\n  function getTime(n) {\n    n = new Date(n);\n    return (\n      n.toLocaleDateString().replace(/\\//g, \"-\") +\n      \" \" +\n      n.toTimeString().substr(0, 8)\n    );\n  }\n\n  const checkIn = async () => {\n    try {\n      await addDoc(collection(db, \"visits\"), {\n        uid: user?.uid,\n        visitor_name: name,\n        visitor_sid: studentID,\n        visitor_role: visitor_role,\n        visitor_phone_number: phone_number,\n        visitor_email: email,\n        time_entry: getTime(new Date().getTime()),\n        time_stay: NewStay,\n        locations_visited: NewLocations,\n        reason_for_visit: NewReason\n      });\n    } catch (err) {\n      console.error(err);\n      alert(err.message);\n    }\n  };\n\n  const handleInputChange = (e) => {\n    const { id, value } = e.target;\n    if (id === \"reason_visit\") {\n      SetNewReason(value);\n    }\n    if (id === \"stay\") {\n      SetNewStay(value);\n    }\n    if (id === \"selector\") {\n      setNewLocations(value);\n    }\n  };\n\n  const data = [\n    \"Avery's Shearing Shed\",\n    \"General Purpose Shed\",\n    \"Farm Manager's House\",\n    \"Old Farmhouse Accommodation\",\n    \"Gravel Pit/Bush\",\n    \"Mt Misery\",\n    \"North Avery's\",\n    \"Cunninghams\",\n    \"Bottom Woods\",\n    \"Top Woods\",\n    \"East Averys\",\n    \"South Averys\",\n    \"Averys Hill\",\n    \"Roundup\",\n    \"Emu Hill Bush\",\n    \"Emu Hill\",\n    \"Garden\",\n    \"Boyagin\",\n    \"West Garden\",\n    \"Fox Hill Bush\",\n    \"Fox Hill\",\n    \"Boundary Corner\",\n    \"Park Land\",\n    \"Triangle\",\n    \"House Dam\",\n    \"Contour\",\n    \"North L\",\n    \"Corner\",\n    \"13 Island Dam\",\n    \"L Shape\",\n    \"Echinda\",\n    \"Top Cow Dam\",\n    \"Bottom Cow Dam\",\n    \"Windmill\",\n    \"Rams\",\n    \"Shed\",\n    \"Supershed\",\n    \"Plot\",\n    \"50 Acre\",\n    \"Rocky\",\n    \"Eco Restoration\",\n    \"Dorper Reserve\",\n    \"Marlborough North\",\n    \"Long Creek\",\n    \"3000 Dam\",\n    \"Watts 1\",\n    \"Roo Creek\",\n    \"South 7 Creek\",\n    \"T Creek\",\n    \"Spring\",\n    \"Wall 3\",\n    \"Beecher\",\n    \"2 Tank Creek\",\n    \"Watts 2\",\n    \"Wall 2\",\n    \"Beecher West\",\n    \"Wall Creek\",\n    \"Watts 3\",\n    \"Page Creek\",\n    \"Wall Corner\",\n    \"Hay Rake\",\n    \"Watts Creek\"\n  ];\n\n  const [options, setOptions] = useState(data);\n\n  const handleChange = (e) => {\n    setNewLocations(Array.isArray(e) ? e.map((x) => x.value) : []);\n  };\n\n  useEffect(() => {\n    if (loading) return;\n    if (!user) return navigate(\"/\");\n    fetchUserInfo();\n  }, [user, loading]);\n\n  return (\n    <div className=\"CheckIn\">\n      <Announcement\n        title=\"Please follow the guidelines by UWA\"\n        subtitle=\"Prior to visiting the farm, the relevant checks must have been completed by your supervisor/organisation to ensure you have sufficient information, instruction, training, and supervision while at Ridgefield. \"\n        link=\"https://www.uwa.edu.au/institutes/institute-of-agriculture/UWA-Farm-Ridgefield\"\n        imageSource={Logo}\n        daysToLive={3}\n        secondsBeforeBannerShows={5}\n        closeIconSize={20}\n      />\n      <Announcement\n        title=\"Please note mobile service can be intermittent and unreliable at the farm\"\n        subtitle=\"If you do not have service, move to another area to be in range. You must have access to a Telstra mobile while at Ridgefield\"\n        link=\"https://www.uwa.edu.au/institutes/institute-of-agriculture/UWA-Farm-Ridgefield\"\n        imageSource={Logo}\n        daysToLive={3}\n        secondsBeforeBannerShows={30}\n        closeIconSize={20}\n      />\n      <div className=\"card-container\" id=\"checkcontainer\">\n        <div className=\"card-content\">\n          <h3 className=\"header\">Check-In </h3>\n          <div>\n            <span className=\"fields\">Destination</span>\n            <br />\n            <div\n              style={{\n                width: \"100%\",\n                justifyContent: \"center\",\n                display: \"flex\"\n              }}\n            >\n              <Multiselect\n                id=\"selector\"\n                isObject={false}\n                onRemove={(e) => {\n                  console.log(e);\n                }}\n                onSelect={(e) => setNewLocations(e)}\n                value={data.filter((obj) => NewLocations.includes(obj.value))}\n                options={data}\n              />\n            </div>\n            <span className=\"sub-text\">Unsure</span>{\" \"}\n            <input type=\"checkbox\" className=\"checkbox\" /> <br /> <br />\n            <span className=\"fields\">Reason for visit</span> <br />\n            <input\n              type=\"text\"\n              placeholder=\"Reason for visit\"\n              className=\"form__input\"\n              id=\"reason_visit\"\n              value={NewReason}\n              onChange={(e) => handleInputChange(e)}\n            />\n            <br /> <br />\n            <span className=\"fields\">Estimated duration of visit</span> <br />\n            <input\n              type=\"text\"\n              placeholder=\"Put your number in hours\"\n              className=\"form__input\"\n              id=\"stay\"\n              value={NewStay}\n              onChange={(e) => handleInputChange(e)}\n            />\n            <br /> <br />\n            <span className=\"sub-text\">Overnight Stay</span>{\" \"}\n            <input\n              type=\"checkbox\"\n              className=\"checkbox\"\n              onChange={displayReminder}\n            />\n            <br />\n            <span className=\"sub-text\">\n              {checked ? \"Make sure to book your stay\" : \"\"}\n            </span>\n            <br />\n            <Link to=\"/dashboard\">\n              <button\n                className=\"button\"\n                onClick={() => {\n                  checkIn();\n                }}\n                href=\"/dashboard\"\n              >\n                Check in\n              </button>\n            </Link>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default CheckIn;\n","//import Header from \"/src/components/header\";\n//import { db } from \"/src/components/firebase\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { auth, db, logout } from \"./firebase.js\";\n\nimport {\n  collection,\n  getDocs,\n  addDoc,\n  updateDoc,\n  doc,\n  deleteDoc,\n  where,\n  query\n} from \"firebase/firestore\";\n\nimport \"./admin.css\";\n\nexport default function Check() {\n  const [user, loading, error] = useAuthState(auth);\n\n  const [users, setUsers] = useState([]);\n  const [newRole, setNewRole] = useState();\n  const [text, setText] = useState(\"\");\n  const [title, setTitle] = useState(\"\");\n  const [log, setLog] = useState([]);\n  const userRef = collection(db, \"users\");\n  const logRef = collection(db, \"visits\");\n  const [currName, setCurrName] = useState(\"\");\n  const [currRole, setCurrRole] = useState(\"\");\n  const navigate = useNavigate();\n\n  const deleteUser = async (id) => {\n    const userDoc = doc(db, \"users\", id);\n    await deleteDoc(userDoc);\n  };\n\n  const handleChange = (e) => {\n    const { id, value } = e.target;\n    if (id === \"new_role\") {\n      setNewRole(value);\n    }\n    if (id === \"a_title\") {\n      setTitle(value);\n    }\n    if (id === \"a_text\") {\n      setText(value);\n    }\n  };\n\n  function getTime(n) {\n    n = new Date(n);\n    return (\n      n.toLocaleDateString().replace(/\\//g, \"-\") +\n      \" \" +\n      n.toTimeString().substr(0, 8)\n    );\n  }\n\n  // Check In\n  const checkIn = async (id) => {\n    const userDoc = doc(db, \"users\", id);\n    const newFields = { checked_in: true };\n    await updateDoc(userDoc, newFields);\n    const newTimeFields = { check_time: getTime(new Date().getTime()) };\n    await updateDoc(userDoc, newTimeFields);\n  };\n\n  // Check Out\n  const checkOut = async (id) => {\n    const userDoc = doc(db, \"users\", id);\n    const newFields = { checked_in: false };\n    await updateDoc(userDoc, newFields);\n    const newTimeFields = { check_time: getTime(new Date().getTime()) };\n    await updateDoc(userDoc, newTimeFields);\n  };\n\n  const makeAdmin = async (id) => {\n    const userDoc = doc(db, \"users\", id);\n    const newFields = { role: \"Admin\" };\n    await updateDoc(userDoc, newFields);\n  };\n\n  const fetchUserNameAndRole = async () => {\n    try {\n      const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user?.uid));\n      const doc = await getDocs(q);\n      const data = doc.docs[0].data();\n      setCurrName(data.name);\n      setCurrRole(data.role);\n    } catch (err) {\n      console.error(err);\n      alert(\"An error occured while fetching user data\");\n    }\n  };\n\n  // Get checked in Users\n  // TO DO: store doc.data() in a table\n  const getCheckedInUsers = async () => {\n    const q = query(collection(db, \"users\"), where(\"checked_in\", \"==\", true));\n    const querySnapshot = await getDocs(q);\n    querySnapshot.forEach((doc) => {\n      console.log(doc.id, \" => \", doc.data());\n    });\n  };\n\n  const newAnnouncement = async (name, title, role, text, time) => {\n    try {\n      await addDoc(collection(db, \"announcements\"), {\n        uid: user.uid,\n        name,\n        title,\n        role,\n        text,\n        time\n      });\n      alert(\"Announcement posted!\");\n    } catch (error) {\n      alert(error.message);\n    }\n  };\n\n  // Fetch from DB and map (Read)\n  useEffect(() => {\n    const getUsers = async () => {\n      const data = await getDocs(userRef);\n      setUsers(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\n    };\n    const getLog = async () => {\n      const data = await getDocs(logRef);\n      setLog(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\n    };\n\n    if (loading) return;\n    if (!user) return navigate(\"/\");\n    getLog();\n    getUsers();\n    fetchUserNameAndRole();\n  }, [user, loading]);\n\n  return (\n    <div className=\"container\">\n      <div className=\"row justify-content-md-center\">\n        <div className=\"col mb-3\">\n          <div className=\"card\">\n            <div className=\"card-header\">\n              <h2> User Database </h2>\n            </div>\n            <div className=\"card-body\">\n              <table id=\"CheckedInTable\">\n                <tbody>\n                  <tr>\n                    <th>Name</th>\n                    <th>Student ID</th>\n                    <th>E-mail</th>\n                    <th>Phone Number</th>\n                    <th> Role </th>\n                    <th> Provider </th>\n                    <th> Make Admin </th>\n                    <th> Delete User </th>\n                  </tr>\n                  {users.map((user) => {\n                    return (\n                      <tr key={user}>\n                        <td>{user.name}</td>\n                        <td>{user.student_id}</td>\n                        <td>{user.email}</td>\n                        <td>{user.phone_number}</td>\n                        <td contenteditable=\"true\">{user.role}</td>\n                        <td>{user.authProvider}</td>\n                        <td>\n                          <button\n                            type=\"button\"\n                            class=\"btn btn-success\"\n                            onClick={() => {\n                              makeAdmin(user.id);\n                            }}\n                          >\n                            Grant\n                          </button>\n                        </td>\n                        <td>\n                          <button\n                            type=\"button\"\n                            class=\"btn btn-danger\"\n                            onClick={() => {\n                              deleteUser(user.id);\n                            }}\n                          >\n                            Delete\n                          </button>\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n        <div className=\"col mb-3\">\n          <div className=\"card\">\n            <div className=\"card-header\">\n              <h2> Visitor Log </h2>\n            </div>\n            <div className=\"card-body\">\n              <table id=\"log_table\">\n                <tbody>\n                  <tr>\n                    <th> Visitor name</th>\n                    <th> Type of Visitor </th>\n                    <th> Date of visit </th>\n                    <th> Locations visited </th>\n                    <th> Estimated stay </th>\n                    <th> Reason of visit </th>\n                    <th> Time of exit </th>\n                  </tr>\n                  {log\n                    .sort((a, b) => (a.time_entry < b.time_entry ? 1 : -1))\n                    .map((visit) => {\n                      return (\n                        <tr key={visit}>\n                          <td>{visit.visitor_name}</td>\n                          <td>{visit.visitor_role}</td>\n                          <td>{visit.time_entry}</td>\n                          <td>{visit.locations_visited}</td>\n                          <td>{visit.time_stay} hours</td>\n                          <td>{visit.reason_for_visit}</td>\n                          <td> {visit.time_exit} </td>\n                        </tr>\n                      );\n                    })}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"row justify-content-md-center\">\n        <div className=\"col mb-3\">\n          <div className=\"card\">\n            <div className=\"card-header\">\n              <h2> Create announcement </h2>\n            </div>\n            <div className=\"card-body\" id=\"a_body\">\n              <input\n                className=\"form-control\"\n                type=\"text\"\n                value={title}\n                onChange={(e) => handleChange(e)}\n                id=\"a_title\"\n                placeholder=\"Enter title...\"\n              />\n              <br></br>\n              <form>\n                <textarea\n                  id=\"a_text\"\n                  value={text}\n                  placeholder=\"Enter context of announcement...\"\n                  onChange={(e) => handleChange(e)}\n                />\n              </form>\n              <button\n                type=\"button\"\n                id=\"a_button\"\n                class=\"btn btn-primary\"\n                onClick={() => {\n                  newAnnouncement(\n                    currName,\n                    title,\n                    currRole,\n                    text,\n                    getTime(new Date().getTime())\n                  );\n                }}\n              >\n                Post\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import \"./styles.css\";\nimport ReactDOM from \"react-dom/client\";\nimport { BrowserRouter, Route, Routes } from \"react-router-dom\";\nimport Header from \"./components/header\";\nimport Login from \"./components/login\";\nimport Reset from \"./components/reset\";\nimport Dashboard from \"./components/Dashboard.js\";\n//import Preferences from \"./components/Preferences/Preferences\";\nimport RegisterForm from \"./components/register\";\nimport UpdateInfo from \"./components/updateProfile.js\";\nimport CheckIn from \"./components/check_inMatin.js\";\nimport Admin from \"./components/admin.js\";\nexport default function App() {\n  return (\n    <div className=\"App\">\n      <BrowserRouter>\n        <Header />\n        <Routes>\n          <Route exact path=\"/home\" element={<Login />} />\n          <Route exact path=\"/checkin\" element={<CheckIn />} />\n          <Route exact path=\"/register\" element={<RegisterForm />} />\n          <Route exact path=\"/reset\" element={<Reset />} />\n          <Route exact path=\"/dashboard\" element={<Dashboard />} />\n          <Route exact path=\"/profile\" element={<UpdateInfo />} />\n          <Route exact path=\"/admin\" element={<Admin />} />\n        </Routes>\n      </BrowserRouter>\n    </div>\n  );\n}\n\nconst root = ReactDOM.createRoot(document.getElementById(\"root\"));\nroot.render(<App />);\n","import { StrictMode } from \"react\";\nimport { createRoot } from \"react-dom/client\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nconst root = createRoot(rootElement);\n\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);\n"],"sourceRoot":""}